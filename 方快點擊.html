<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>é»æ“Šæ–¹å¡ŠéŠæˆ²</title>
  <style>
#instructions {
  position: absolute;      /* æµ®åœ¨é é¢ä¸Šï¼Œä¸å åŸæœ¬å¸ƒå±€ç©ºé–“ */
  top: 60%;               /* è·é›¢é é¢ä¸Šæ–¹ 50pxï¼Œå¯è‡ªè¡Œèª¿æ•´ */
  left: 50%;               /* æ°´å¹³ç½®ä¸­ */
  transform: translate(-50%, -50%); /* æ°´å¹³ç½®ä¸­ä¿®æ­£ */
  background-color: #fff8dc;
  text-align: center;
  padding: 20px 25px;
  border: 1px solid #dadba3;
  border-radius: 10px;
  box-shadow: 0 0 10px rgba(0,0,0,0.2);
  z-index: 100;            /* è“‹åœ¨éŠæˆ²ä¸Šæ–¹ */
  width: 360px;
  
  display:none;
  
  }
  



.center-text {
  text-align: center;
}

    body {
      text-align: center;
      font-family: Arial, sans-serif;
      background-color: #f8f8f8;
      transition: background-color 0.5s ease;
    }

    #game-area {
      position: relative;
      width: 400px;
      height: 400px;
      margin: 20px auto;
      background-color: #f2f2f2;
      border: 2px solid #333;
      overflow: hidden;
    }

    #box {
      width: 50px;
      height: 50px;
      background-color: red;
      position: absolute;
      cursor: pointer;
      border-radius: 10px;
      transition: left 0.4s ease, top 0.4s ease; /* å¹³æ»‘ç§»å‹•å‹•ç•« */
    }

    button {
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      background-color: #4CAF50;
      color: white;
      margin: 10px;
      transition: background-color 0.3s;
    }

    button:hover {
      background-color: #45a049;
    }

        /* +1 æµ®å‹• */
    #time-container {
      position: relative; /* è®“ plus-one çš„çµ•å°å®šä½ç›¸å°æ–¼é€™å€‹å®¹å™¨ */
      display: inline-block;
    }

    .plus-one {
      position: absolute;
      top: 0;
      left: 100%;       /* åœ¨æ™‚é–“æ•¸å­—å³å´ */
      margin-left: 8px; /* èˆ‡æ–‡å­—ç•™ä¸€é»è·é›¢ */
      font-size: 28px;
      font-weight: bold;
      color: #ffeb3b;
      text-shadow: 0 0 10px #ffeb3b, 0 0 20px #ff9800;
      pointer-events: none;
      animation: floatUp 1s ease-out forwards;
    }

@keyframes floatUp {
  0% {
    opacity: 1;
    transform: translateY(0);
  }
  100% {
    opacity: 0;
    transform: translateY(-20px);
  }
}


  </style>
</head>
<body>
  <h1>åˆ†æ•¸ï¼š<span id="score">0</span></h1>
  <h2 id="time-container">å€’æ•¸æ™‚é–“ï¼š<span id="time">10</span> ç§’</h2>
  <h2>éŠæˆ²æ™‚é–“ï¼š<span id="operate">0</span> ç§’</h2>
  <button id="start-btn">é–‹å§‹éŠæˆ²</button>
  <button id="restart-btn" style="display:none;">é‡æ–°é–‹å§‹</button>
  <button id="toggle-instructions">æŸ¥çœ‹èªªæ˜</button>
  <div id="game-area">
  <div id="box"></div>
  </div>
  
  <div id="instructions">
    <h3>ğŸ®éŠæˆ²èªªæ˜</h3>
    <ul>
      <li class="center-text">é»æ“Šæ–¹å¡Šç²å¾—åˆ†æ•¸</li>
      <li class="center-text">æ¯é»æ“Š7æ¬¡ï¼Œå‰©é¤˜æ™‚é–“æœƒ+1!</li>
      <li class="center-text">ç›¡å¯èƒ½ç²å¾—åˆ†æ•¸å§!</li>
    </ul>
    <h3>Enjoy your game!</h3>

  </div>
  

  

  <script>
    const box = document.getElementById("box");
    const scoreDisplay = document.getElementById("score");
    const timeDisplay = document.getElementById("time");
    const operateDisplay = document.getElementById("operate");
    const startBtn = document.getElementById("start-btn");
    const restartBtn = document.getElementById("restart-btn");
    const area = document.getElementById("game-area");
    

    let score = 0;
    let time = 10;
    let operate = 0;
    let timer, operateTimer;
    let gameActive = false;


    const toggleBtn = document.getElementById("toggle-instructions");
    const instructions = document.getElementById("instructions");
//èªªæ˜é é¢é–‹é—œ
toggleBtn.addEventListener("click", () => {
  if (instructions.style.display === "none" || instructions.style.display === "") {
    instructions.style.display = "block"; // é¡¯ç¤ºèªªæ˜
    toggleBtn.textContent = "âŒ é—œé–‰èªªæ˜";
  } else {
    instructions.style.display = "none";  // éš±è—èªªæ˜
    toggleBtn.textContent = "æŸ¥çœ‹èªªæ˜";
  }
});


    const maxX = () => area.clientWidth - box.clientWidth;
    const maxY = () => area.clientHeight - box.clientHeight;

    // âœ… å¹³æ»‘ç§»å‹•åˆ°éš¨æ©Ÿä½ç½®
    function moveBox() {
      const newX = Math.random() * maxX();
      const newY = Math.random() * maxY();
      box.style.left = `${newX}px`;
      box.style.top = `${newY}px`;
    }
    function showPlusOne() {
  const plus = document.createElement("div");
  plus.textContent = "+1";
  plus.className = "plus-one";
   const timeDisplay = document.getElementById("time");
  timeDisplay.parentElement.appendChild(plus); // æ”¾åœ¨å€’æ•¸æ™‚é–“é‚£ä¸€è¡Œæ—é‚Š


  
  

  // 0.8 ç§’å¾Œç§»é™¤å…ƒç´ 
  setTimeout(() => area.removeChild(plus), 800);
}
    function changeColor() {
      box.style.backgroundColor = `hsl(${score * 30 % 360}, 100%, 50%)`;
    }

    function changeBackground() {
      document.body.style.backgroundColor = `hsl(${score * 30 % 360}, 100%, 85%)`;
    }

    function startGame() {
      if (gameActive) return;
      gameActive = true;
      document.getElementById("instructions").style.display = "none";
      startBtn.style.display = "none";
      restartBtn.style.display = "none";
      box.style.display = "block";

      // åˆå§‹åŒ–
      score = 0;
      time = 10;
      operate = 0;
      box.style.backgroundColor = "red";
      document.body.style.backgroundColor = "#f8f8f8";
      scoreDisplay.textContent = score;
      timeDisplay.textContent = time;
      operateDisplay.textContent = operate;

      // èµ·å§‹ä½ç½®
      moveBox();

      // å€’æ•¸
      timer = setInterval(() => {
        time--;
        timeDisplay.textContent = time;
        if (time <= 0) endGame();
      }, 1000);

      // éŠæˆ²æ™‚é–“
      operateTimer = setInterval(() => {
        operate++;
        operateDisplay.textContent = operate;
      }, 1000);
    }

    function endGame() {
      clearInterval(timer);
      clearInterval(operateTimer);
      gameActive = false;
      alert(`â° æ™‚é–“åˆ°ï¼ä½ çš„åˆ†æ•¸æ˜¯ ${score}`);
      box.style.display = "none";
      restartBtn.style.display = "inline-block";
    }

    function restartGame() {
      startGame();
    }
    box.addEventListener("click", () => {
  if (!gameActive) return;
  scoreDisplay.textContent = score;
  changeColor();

  if (score % 7 === 0) {
    time++;
    timeDisplay.textContent = time;
    showPlusOne(); // âœ… å¢åŠ ç‰¹æ•ˆ
  }

  if (score % 10 === 0) changeBackground();
  moveBox();
});


    // âœ… é»æ“Šæ–¹å¡Šï¼šæ»‘å‹•æ”¹è®Šä½ç½®ã€åŠ åˆ†ã€å»¶æ™‚
    box.addEventListener("click", () => {
      if (!gameActive) return;
      score++;
      scoreDisplay.textContent = score;
      changeColor();
      
  


      if (score % 10 === 0) changeBackground();
      if (score % 3 === 0) time++;

      // ç§»å‹•æ–¹å¡Šï¼ˆæ»‘éå»è€Œéæ¶ˆå¤±ï¼‰
      moveBox();
    });

    startBtn.addEventListener("click", startGame);
    restartBtn.addEventListener("click", restartGame);
  </script>
</body>
</html>
