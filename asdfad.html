<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ezGAME</title>
  <style>
    body {
      text-align: center;
      font-family: Arial, sans-serif;
      background-color: #f1b0b0;
      transition: background-color 0.5s ease;
    }

    #start-button {
      margin-top: -100px;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      padding: 20px 40px;
      font-size: 24px;
      background-color: #b477fd;
      border: none;
      border-radius: 10px;
      color: rgb(250, 241, 188);
      font-weight: bold;
      cursor:  url("aim.png") 16 16, crosshair;
      overflow: hidden;
      z-index: 10;
    }

    /* âœ¨å…‰ç·šå¤–æ¡† */
    #start-button::before {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: 10px;
      padding: 2px; /* å¤–æ¡†åšåº¦ */
      background: linear-gradient(90deg, #ff00cc, #3333ff, #00ffcc, #ff00cc);
      background-size: 300% 100%;
      animation: borderFlow 3s linear infinite;
      -webkit-mask:
        linear-gradient(#fff 0 0) content-box,
        linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      /* æ·»åŠ æ¨™æº– mask å±¬æ€§ä»¥æå‡ç›¸å®¹æ€§ */
      mask:
        linear-gradient(#fff 0 0) content-box,
        linear-gradient(#fff 0 0);
      pointer-events: none; /* è®“é»æ“Šä»èƒ½é»åˆ°æŒ‰éˆ• */
    }

    /* å…‰ç·šå‹•ç•« */
    @keyframes borderFlow {
      0% { background-position: 0% 50%; }
      100% { background-position: 300% 50%; }
    }

    /* hover æ™‚äº®èµ· */
    #start-button:hover {
      background-color: #cc82f7;
      box-shadow: 0 0 20px rgba(160, 130, 255, 0.6);
    }
    
    #start-button:active {
      filter: brightness(0.8);
    }

    #info-bar {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      width: 90vw;
      max-width: 400px;
      margin: 20px auto;
      font-size: 18px;
      font-weight: bold;
      color: #400000;
    }

    #left-info, #right-info {
      text-align: left;
    }

    #right-info {
      text-align: right;
    }

    #game-area {
      position: relative;
      width: 90vw;
      max-width: 400px;
      aspect-ratio: 1 / 1;
      margin: 0 auto;
      background-color: #f2f2f2;
      border: 2px solid #333;
      cursor: url("aim.png") 16 16, crosshair;
    }

    #box {
      display: none;
      width: 12.5%;
      aspect-ratio: 1 / 1;
      background-color: #984eb8;
      border-radius: 10px;
      position: absolute;
      cursor:  url("aim.png") 16 16, crosshair;
      transition: background-color 0.5s ease, left 0.3s ease, top 0.3s ease;
    }

    /* âœ¨å…‰ç·šå¤–æ¡† */
    #box::before {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: 10px;
      padding: 1px; /* å¤–æ¡†åšåº¦ */
      background: #fffb00;
      background-size: 300% 100%;
      animation: borderFlow 3s linear infinite;
      -webkit-mask:
        linear-gradient(#fff 0 0) content-box,
        linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      pointer-events: none; /* è®“é»æ“Šä»èƒ½é»åˆ°æŒ‰éˆ• */
    }

    /* å…‰ç·šå‹•ç•« */
    @keyframes borderFlow {
      0% { background-position: 0% 50%; }
      100% { background-position: 300% 50%; }
    }

    #box:active {
      filter: brightness(0.85);
    }

    /* ğŸ“± è‡ªè¨‚å½ˆçª— */
    #rules-box, #alert-box {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: white;
      border: 3px solid #333;
      border-radius: 10px;
      padding: 20px 30px;
      z-index: 100;
      text-align: center;
      font-size: 20px;
      box-shadow: 0 0 20px rgba(0,0,0,0.3);
      cursor: url("aim.png") 16 16, crosshair;
    }

    #rules-box, #alert-box button {
      margin-top: 10px;
      padding: 10px 20px;
      background-color: #28c3db;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: url("aim.png") 16 16, crosshair;
      animation: pulsee 1s infinite alternate;
    }

    @keyframes pulsee {
      0% { transform: scale(1); }
      100% { transform: scale(1.2); }
    }

    .time-bonus {
      position: absolute;
      font-size: 32px;
      font-weight: bold;
      color: #ffeb3b;
      text-shadow: 0 0 10px #ffeb3b, 0 0 20px #ff9800;
      animation: floatBlink 1s forwards;
      pointer-events: none;
    }

    @keyframes floatBlink {
      0% { opacity: 1; transform: translateY(0) scale(1); }
      50% { opacity: 1; transform: translateY(-20px) scale(1.3); }
      100% { opacity: 0; transform: translateY(-40px) scale(1); }
    }
  </style>
</head>
<body>
  <div id="info-bar">
    <div id="left-info">
      <div>åˆ†æ•¸ï¼š<span id="score">0</span></div>
      <div>å‰©é¤˜æ™‚é–“ï¼š<span id="time">10</span> ç§’</div>
      <div>å­˜æ´»æ™‚æ•¸ï¼š<span id="operate">0</span> ç§’</div>
    </div>
    <div id="right-info">
      <div>æœ€é«˜åˆ†æ•¸ï¼š<span id="high-score">0</span></div>
      <div>æœ€é•·å­˜æ´»æ™‚æ•¸ï¼š<span id="high-operate">0</span> ç§’</div>
    </div>
  </div>

  
  <div id="game-area">
    <div id="box"></div>
    <button id="start-button">é»æˆ‘å­</button>
  </div>

  <!-- ğŸ“± è‡ªè¨‚å½ˆçª— -->
  <div id="alert-box">
    <p id="alert-text"></p>
    <button onclick="closeAlert()">é‡æ–°æŒ‘æˆ°</button>
  </div>

  <script>
    const box = document.getElementById("box");
    const scoreDisplay = document.getElementById("score");
    const timeDisplay = document.getElementById("time");
    const operateDisplay = document.getElementById("operate");
    const highScoreDisplay = document.getElementById("high-score");
    const highOperateDisplay = document.getElementById("high-operate");
    const startButton = document.getElementById("start-button");
    const alertBox = document.getElementById("alert-box");
    const alertText = document.getElementById("alert-text");

    let score = 0;
    let time = 10;
    let operate = 0;
    let speed = 1;
    let timer, operateTime;
    let previousTime = time;
    let highScore = 0;
    let highOperate = 0;

    function moveBox() {
      const area = document.getElementById("game-area");
      const maxX = area.clientWidth - box.clientWidth;
      const maxY = area.clientHeight - box.clientHeight;
      const x = Math.random() * maxX;
      const y = Math.random() * maxY;
      box.style.left = `${x}px`;
      box.style.top = `${y}px`;
    }

    function changeColor() {
      const hue = score * 25 % 360;
      const light = 40 + (score % 3) * 5;
      box.style.backgroundColor = `hsl(${hue}, 100%, ${light}%)`;
    }

    function changeBackground() {
      const hue = score * 25 % 360;
      const light = 70 + (score % 2) * 20;
      document.body.style.backgroundColor = `hsl(${hue}, 100%, ${light}%)`;
    }

    function showAlert(message) {
      alertText.textContent = message;
      alertBox.style.display = "block";
    }

    function closeAlert() {
      alertBox.style.display = "none";
      resetGame();
    }

    function resetGame() {
      if (score > highScore) {
        highScore = score;
        highScoreDisplay.textContent = highScore;
      }
      if (operate > highOperate) {
        highOperate = operate;
        highOperateDisplay.textContent = highOperate;
      }
      
      score = 0;
      time = 10;
      previousTime = time;
      operate = 0;
      speed = 1;
      scoreDisplay.textContent = 0;
      timeDisplay.textContent = 10;
      operateDisplay.textContent = 0;
      startButton.style.display = "block";
      box.style.display = "none";
      moveBox();
      document.body.style.backgroundColor = "#e06161";
      box.style.backgroundColor = "#984eb8";
    }

    function startGame() {
      startButton.style.display = "none";
      box.style.display = "block";
      moveBox();

      timer = setInterval(() => {
        time--;
        if (time <= 0) {
          clearInterval(timer);
          clearInterval(operateTime);
          time = 0;
          timeDisplay.textContent = 0;
          operate++;
          operateDisplay.textContent = operate;
          box.style.display = "none";

          setTimeout(() => {
            showAlert(`æ™‚é–“åˆ°ï¼ï¼ä½ çš„åˆ†æ•¸æ˜¯ ${score}`);
          }, 50);
        } else {
          timeDisplay.textContent = time;
        }
      }, 1000);

      const timeCheck = setInterval(() => {
        if (time > previousTime) {
          const bonusTime = time - previousTime;

          const bonusEl = document.createElement("span");
          bonusEl.className = "time-bonus";
          bonusEl.textContent = `+${bonusTime}`;

          const timeRect = timeDisplay.getBoundingClientRect();
          bonusEl.style.left = `${timeRect.right + 10}px`;
          bonusEl.style.top = `${timeRect.top}px`;

          document.body.appendChild(bonusEl);

          setTimeout(() => {
            document.body.removeChild(bonusEl);
          }, 1000);
        }
        previousTime = time;
      }, 100);

      operateTime = setInterval(() => {
        operate++;
        operateDisplay.textContent = operate;
        if (operate % 10 === 0) speed++;
      }, 1000);
    }

    box.addEventListener("click", () => {
      score++;
      scoreDisplay.textContent = score;
      moveBox();

      const rate = Math.max(1, Math.floor(5 / speed)); // è¶Šå¿«è¶Šå¸¸è®Š
      if (score % rate === 0) {
        changeColor();
        changeBackground();
      }
      
      if (score % (speed*2) === 0) time++;
      if (score % 15 === 0) time += 5;
    });

    startButton.addEventListener("click", startGame);
  </script>
</body>
</html>
